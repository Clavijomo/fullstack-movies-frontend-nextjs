(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{2371:(e,s,a)=>{Promise.resolve().then(a.bind(a,2978))},9388:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var r=a(5155);a(2115);var i=a(1996),t=a.n(i);a(3965);let c=e=>{let{score:s,minimal:a}=e,i=a&&a?23:27,t=Math.min(Math.max(s,0),10),c=2*Math.PI*i,l=t/10*c,o=(e=>e>=7?"#4caf50":e>=5?"#ffc107":"#f44336")(t);return(0,r.jsxs)("div",{className:"progress-circle",children:[(0,r.jsxs)("svg",{className:"progress-svg",width:(i+4)*2,height:(i+4)*2,viewBox:"0 0 ".concat((i+4)*2," ").concat((i+4)*2),children:[(0,r.jsx)("circle",{className:"progress-bg",cx:i+4,cy:i+4,r:i,strokeWidth:4}),(0,r.jsx)("circle",{className:"progress-bar",cx:i+4,cy:i+4,r:i,strokeWidth:4,style:{stroke:o},strokeDasharray:c,strokeDashoffset:c-l})]}),(0,r.jsxs)("div",{className:"progress-text",children:[Math.round(10*t),"%"]})]})};c.propTypes={score:t().number.isRequired};let l=c},2978:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var r=a(5155),i=a(2115),t=a(2651),c=a(3205),l=a(6046);a(2310);var o=a(5565);let n=e=>{let{name:s,image:a}=e;return(0,r.jsxs)("div",{className:"card-related",children:[(0,r.jsx)(o.default,{src:a,alt:"image-movie",className:"image-movie-recommend",width:200,height:250}),(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"title-movie-related",children:s})})]})};var d=a(6581),m=a(5933),h=a(6549),v=a(8386),x=a(7944),u=a(9388);let j=e=>{let{image:s,name:a,date:i,duration:t,rating:c,tags:n,description:j,favorite:p}=e.movie,N=(0,l.useRouter)();return(0,r.jsxs)("div",{className:"container-detail-movie",children:[(0,r.jsx)("div",{className:"overlay"}),(0,r.jsx)(x.A,{className:"button-back-poster",sx:{padding:2},size:"medium",onClick:()=>N.back(),children:(0,r.jsx)(d.A,{})}),(0,r.jsxs)("div",{className:"detail-movie",children:[(0,r.jsxs)("div",{className:"section-trailer-movie",children:[(0,r.jsx)(o.default,{src:s,alt:"movie",width:200,className:"image",height:200}),(0,r.jsxs)("button",{children:["Oficial trailer",(0,r.jsx)(v.A,{})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"title-movie-detail",children:a}),(0,r.jsxs)("div",{className:"sub-info-movie",children:[(0,r.jsx)("p",{children:i}),(0,r.jsxs)("p",{children:[t,"min"]})]}),(0,r.jsx)("p",{className:"description-poster-movie",children:j}),(0,r.jsxs)("div",{className:"container-score",children:[(0,r.jsxs)("div",{className:"score",children:[(0,r.jsx)(u.A,{score:c}),(0,r.jsx)("p",{children:"Users Score"})]}),(0,r.jsx)("div",{children:!0===p?(0,r.jsx)(m.A,{}):(0,r.jsx)(h.A,{})})]}),n&&n.length>0&&(0,r.jsx)("div",{className:"tag-container",children:n.map((e,s)=>(0,r.jsx)("p",{className:"tag",children:e},s))})]})]})]})};async function p(e){try{let s=await t.A.post("".concat("https://movies-fullstack-app-backend.onrender.com").concat("/movies/movie"),{movieId:e}),a=s.data;if(s.data.relatedMovies.length>0){let e=await N(s.data.relatedMovies);e&&e.length>0&&(a.moviesRecommend=e)}return a}catch(e){var s;if(e instanceof c.pe&&(null===(s=e.response)||void 0===s?void 0:s.status)===404)throw Error("Movie not Found");throw Error("Failed to fetch")}}async function N(e){try{return(await t.A.post("".concat("https://movies-fullstack-app-backend.onrender.com").concat("/movies/recommend"),{recommend:e})).data}catch(e){var s;if((null===(s=e.response)||void 0===s?void 0:s.status)===404)throw Error("Movie not Found");throw Error("Failed to fetch")}}let f=()=>{let{id:e}=(0,l.useParams)(),[s,a]=(0,i.useState)(null),[t,c]=(0,i.useState)(!0),[o,d]=(0,i.useState)(null);if((0,i.useEffect)(()=>{let s=async()=>{try{c(!0);let s=await p(Number(e));a(s)}catch(e){d(e.message)}finally{c(!1)}};return window.scrollTo(0,0),s(),document.body.classList.add("dashboard-movie"),()=>document.body.classList.remove("dashboard-movie")},[e]),t)return(0,r.jsxs)("div",{className:"loading-screen",children:[(0,r.jsx)("div",{className:"spinner"}),(0,r.jsx)("p",{children:"Loading..."})]});if(o||!s)return(0,r.jsxs)("div",{className:"error-screen",children:[(0,r.jsx)("h1",{children:"Oops!"}),(0,r.jsx)("p",{children:o||"Movie not found"}),(0,r.jsx)("button",{onClick:()=>window.history.back(),children:"Go Back"})]});let{moviesRecommend:m}=s;return(0,r.jsxs)("div",{className:"container-grid-movies",children:[(0,r.jsx)(j,{movie:s}),(0,r.jsx)("div",{className:"movie-container-related",children:m&&m.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Recommendations"}),(0,r.jsx)("div",{className:"relates-movies",children:m.map((e,s)=>(0,i.createElement)(n,{...e,key:s}))})]})})]})}},2310:()=>{},3965:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[871,724,175,983,275,441,517,358],()=>s(2371)),_N_E=e.O()}]);